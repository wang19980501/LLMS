2023-07-11 13:54:18,152 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 13:54:18,152 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 13:54:18,826 [INFO] [utils.py:473] æ‚¨çš„IPåŒºåŸŸï¼šJapanã€‚
2023-07-11 13:54:18,947 [INFO] [ChuanhuChatbot.py:484] [42m
å·è™çš„æ¸©é¦¨æç¤ºï¼šè®¿é—® http://localhost:7860 æŸ¥çœ‹ç•Œé¢[0m
2023-07-11 13:54:20,454 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 13:54:20,454 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 13:54:20,524 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 13:54:20,524 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 13:55:03,201 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 13:55:03,201 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 13:55:03,250 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 13:55:03,250 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 14:38:39,260 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mcolumn reference "id" is ambiguous[0m
2023-07-11 14:39:05,154 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mThe error message "column reference 'id' is ambiguous" means that the table or tables being referenced in the query have multiple columns with the same name 'id', and the database engine cannot determine which one to use.

To resolve this ambiguity, you can specify the table name or alias along with the column name in your query. For example, if you have two tables 'table1' and 'table2', both with a column named 'id', you can modify your query like this:

SELECT table1.id, table2.id
FROM table1
JOIN table2 ON table1.id = table2.id;

This will explicitly specify which 'id' column you want to retrieve, avoiding the ambiguity error. Make sure to replace 'table1' and 'table2' with the actual table names in your query.[0m
2023-07-11 14:40:41,760 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 14:40:41,761 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 14:40:44,759 [INFO] [utils.py:473] æ‚¨çš„IPåŒºåŸŸï¼šJapanã€‚
2023-07-11 14:40:44,935 [INFO] [ChuanhuChatbot.py:484] [42m
å·è™çš„æ¸©é¦¨æç¤ºï¼šè®¿é—® http://localhost:7860 æŸ¥çœ‹ç•Œé¢[0m
2023-07-11 14:40:45,972 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 14:40:45,972 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 14:40:46,021 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 14:40:46,021 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 14:40:50,230 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mcolumn reference "id" is ambiguous
[0m
2023-07-11 14:41:02,145 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mThe error message "column reference 'id' is ambiguous" typically occurs when there are multiple tables involved in a query and both of them have a column named 'id'. This ambiguity may lead to confusion for the database engine while determining which 'id' column should be used.

To resolve this issue, you can specify the table name or alias along with the 'id' column in your SQL query. For example, if you have two tables '[0m
2023-07-11 14:41:06,707 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mç”¨ä¸­æ–‡å›ç­”[0m
2023-07-11 14:41:45,535 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34m"column reference 'id' is ambiguous" é”™è¯¯é€šå¸¸å‘ç”Ÿåœ¨æŸ¥è¯¢æ¶‰åŠäº†å¤šä¸ªè¡¨æ ¼ä¸”è¿™äº›è¡¨æ ¼éƒ½æœ‰ä¸€ä¸ªåä¸º'id'çš„åˆ—çš„æƒ…å†µä¸‹ã€‚è¿™ç§æ¨¡ç³Šæ€§å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“å¼•æ“åœ¨ç¡®å®šåº”ä½¿ç”¨å“ªä¸ª'id'åˆ—æ—¶äº§ç”Ÿå›°æƒ‘ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨SQLæŸ¥è¯¢ä¸­æŒ‡å®šè¡¨æ ¼åå­—æˆ–åˆ«åä¸'id'åˆ—ä¸€èµ·ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸¤ä¸ªè¡¨æ ¼ 'table1' å’Œ 'table2'ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ª'id'åˆ—ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç±»ä¼¼ä¸‹é¢çš„è¯­æ³•æ¥æŒ‡å®šè¡¨æ ¼ï¼š

SELECT table1.id, table2.id
FROM table1, table2
WHERE table1.some_column = table2.some_column;

æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä¸ºè¡¨æ ¼æä¾›åˆ«åï¼Œç„¶ååœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨åˆ«åæ¥å¼•ç”¨'id'åˆ—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

SELECT t1.id, t2.id
FROM table1 t1, table2 t2
WHERE t1.some_column = t2.some_column;

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥æ˜ç¡®å‘Šè¯‰æ•°æ®åº“å¼•æ“æ‚¨æƒ³è¦ä½¿ç”¨å“ªä¸ªè¡¨æ ¼ä¸­çš„'id'åˆ—ï¼Œä»è€Œè§£å†³æ¨¡ç³Šæ€§é—®é¢˜ã€‚[0m
2023-07-11 14:41:52,368 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mcolumn reference "id" is ambiguous
[0m
2023-07-11 14:42:32,095 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34m"åˆ—å¼•ç”¨'id'æ˜¯æ¨¡ç³Šçš„"è¿™ä¸ªé”™è¯¯é€šå¸¸å‘ç”Ÿåœ¨æŸ¥è¯¢ä¸­æ¶‰åŠåˆ°å¤šä¸ªè¡¨æ ¼ï¼Œè€Œè¿™äº›è¡¨æ ¼éƒ½æœ‰ä¸€ä¸ªåä¸º'id'çš„åˆ—ã€‚å½“æ•°æ®åº“å¼•æ“åœ¨ç¡®å®šä½¿ç”¨å“ªä¸ª'id'åˆ—æ—¶äº§ç”Ÿæ­§ä¹‰æ—¶ï¼Œå°±ä¼šå‡ºç°è¿™ä¸ªé”™è¯¯ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨æŸ¥è¯¢ä¸­æ˜ç¡®æŒ‡å®šè¦ä½¿ç”¨çš„è¡¨æ ¼ä¸­çš„'id'åˆ—ã€‚å¯ä»¥é€šè¿‡åœ¨'id'åˆ—ä¹‹å‰ä½¿ç”¨è¡¨æ ¼åç§°æˆ–åˆ«åæ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸¤ä¸ªè¡¨æ ¼åˆ†åˆ«æ˜¯'table1'å’Œ'table2'ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªè¡¨æ ¼éƒ½æœ‰ä¸€ä¸ª'id'åˆ—ï¼Œæ‚¨å¯ä»¥è¿™æ ·æ˜ç¡®æŒ‡å®šè¡¨æ ¼ï¼š

SELECT table1.id, table2.id
FROM table1, table2
WHERE table1.some_column = table2.some_column;

æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç»™è¡¨æ ¼è®¾ç½®ä¸€ä¸ªåˆ«åï¼Œå¹¶åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨åˆ«åæ¥å¼•ç”¨'id'åˆ—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š

SELECT t1.id, t2.id
FROM table1 t1, table2 t2
WHERE t1.some_column = t2.some_column;

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥æ˜ç¡®å‘Šè¯‰æ•°æ®åº“å¼•æ“æ‚¨æƒ³è¦ä½¿ç”¨å“ªä¸ªè¡¨æ ¼ä¸­çš„'id'åˆ—ï¼Œä»¥è§£å†³æ¨¡ç³Šæ€§é—®é¢˜ã€‚[0m
2023-07-11 14:48:20,421 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mæ‰“å¼€mysqlè§†å›¾ 1449 - The user specified as a definer ('admin'@'%') does not exist[0m
2023-07-11 14:49:24,378 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mè§†å›¾æ˜¯MySQLä¸­çš„ä¸€ç§æ•°æ®åº“å¯¹è±¡ï¼Œå®ƒæ˜¯ç”±æŸä¸ªç”¨æˆ·å®šä¹‰å’Œåˆ›å»ºçš„ã€‚åœ¨æ‰“å¼€è§†å›¾æ—¶ï¼Œå¦‚æœæŒ‡å®šçš„è§†å›¾æ‹¥æœ‰è€…ç”¨æˆ·ä¸å­˜åœ¨ï¼Œå°±ä¼šå‡ºç°é”™è¯¯æ¶ˆæ¯"1449 - The user specified as a definer ('admin'@'%') does not exist"ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨éœ€è¦é‡‡å–ä»¥ä¸‹æ­¥éª¤ï¼š

1. ç¡®ä¿ç”¨æˆ·å­˜åœ¨ï¼šé¦–å…ˆï¼Œç¡®ä¿æŒ‡å®šçš„è§†å›¾æ‹¥æœ‰è€…ç”¨æˆ·ï¼ˆåœ¨é”™è¯¯æ¶ˆæ¯ä¸­çš„ 'admin'@'%'ï¼‰ç¡®å®å­˜åœ¨äºæ‚¨çš„MySQLç”¨æˆ·åˆ—è¡¨ä¸­ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ç”¨æˆ·åˆ—è¡¨ï¼š
   ```
   SELECT user, host FROM mysql.user;
   ```

2. é‡æ–°åˆ›å»ºç”¨æˆ·ï¼šå¦‚æœæŒ‡å®šçš„ç”¨æˆ·ä¸å­˜åœ¨ï¼Œæ‚¨å¯ä»¥å°è¯•é‡æ–°åˆ›å»ºè¯¥ç”¨æˆ·ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†ç”¨æˆ·æ·»åŠ åˆ°MySQLä¸­ï¼š
   ```
   CREATE USER 'admin'@'%' IDENTIFIED BY 'password';  -- å°† 'admin' æ›¿æ¢ä¸ºå®é™…çš„ç”¨æˆ·åï¼Œå°† 'password' æ›¿æ¢ä¸ºå®é™…çš„å¯†ç 
   ```

3. æˆäºˆæƒé™ï¼šä¸€æ—¦ç”¨æˆ·å­˜åœ¨ï¼Œæ‚¨éœ€è¦ä¸ºç”¨æˆ·æˆäºˆç›¸åº”çš„æƒé™ï¼Œä»¥ä¾¿ä»–èƒ½å¤Ÿæ“ä½œå’Œæ‰“å¼€è§†å›¾ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æˆäºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰æƒé™ï¼š
   ```
   GRANT ALL PRIVILEGES ON *.* TO 'admin'@'%';  -- å°† 'admin' æ›¿æ¢ä¸ºå®é™…çš„ç”¨æˆ·å
   ```

å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œå†æ¬¡å°è¯•æ‰“å¼€è§†å›¾ï¼Œåº”è¯¥ä¸å†å‡ºç°"1449 - The user specified as a definer ('admin'@'%') does not exist"çš„é”™è¯¯æ¶ˆæ¯ã€‚æ³¨æ„ï¼Œè¿™äº›æ­¥éª¤éœ€è¦å…·æœ‰é€‚å½“çš„æƒé™æ‰èƒ½è¿›è¡Œã€‚å¦‚æœæ‚¨æ²¡æœ‰è¶³å¤Ÿçš„æƒé™ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜æˆ–å…·æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·æ¥æ‰§è¡Œè¿™äº›æ­¥éª¤ã€‚[0m
2023-07-11 16:45:16,646 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mæ‹¼æ¥çš„sql fromå…³é”®å­—æ¶ˆå¤±äº†[0m
2023-07-11 16:46:40,629 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34må¦‚æœåœ¨æ‹¼æ¥SQLè¯­å¥ä¸­å‘ç°FROMå…³é”®å­—æ¶ˆå¤±ï¼Œè¿™å¯èƒ½æ˜¯ç”±äºæ‹¼æ¥çš„å­—ç¬¦ä¸²å‡ºç°äº†é”™è¯¯å¯¼è‡´çš„ã€‚ä¸‹é¢æ˜¯å‡ ç§å¸¸è§çš„å¯¼è‡´FROMå…³é”®å­—æ¶ˆå¤±çš„æƒ…å†µå’Œè§£å†³æ–¹æ³•ï¼š

1. æ‹¼æ¥å­—ç¬¦ä¸²æ—¶é”™è¯¯çš„å¼•å·ç”¨æ³•ï¼šå¦‚æœåœ¨æ‹¼æ¥SQLå­—ç¬¦ä¸²æ—¶ä½¿ç”¨äº†ä¸æ­£ç¡®çš„å¼•å·ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ï¼Œè¿›è€Œä½¿FROMå…³é”®å­—æ¶ˆå¤±ã€‚ç¡®ä¿å­—ç¬¦ä¸²çš„å¼•å·ä½¿ç”¨æ­£ç¡®ï¼Œå¹¶åœ¨æ‹¼æ¥å­—ç¬¦ä¸²æ—¶è¿›è¡Œæ­£ç¡®çš„è½¬ä¹‰å¤„ç†ã€‚

ç¤ºä¾‹ï¼š
```python
# é”™è¯¯çš„ä¾‹å­ï¼ŒåŒå¼•å·æœªæ­£ç¡®å…³é—­
sql = "SELECT * "
sql += "FROM table_name
```

```python
# æ­£ç¡®çš„ä¾‹å­ï¼Œä½¿ç”¨æ­£ç¡®çš„å¼•å·å’Œè½¬ä¹‰ç¬¦
sql = "SELECT * "
sql += "FROM table_name"
```

2. æ‹¼æ¥çš„å­—ç¬¦ä¸²ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ï¼šæ£€æŸ¥æ‚¨æ‹¼æ¥çš„å­—ç¬¦ä¸²ä¸­æ˜¯å¦æœ‰å…¶ä»–è¯­æ³•é”™è¯¯ï¼Œä¾‹å¦‚æ¼æ‰äº†é€—å·æˆ–å…¶ä»–å…³é”®å­—ï¼Œè¿™å¯èƒ½å¯¼è‡´FROMå…³é”®å­—æ— æ•ˆã€‚

ç¤ºä¾‹ï¼š
```python
# é”™è¯¯çš„ä¾‹å­ï¼Œæ¼æ‰äº†é€—å·
sql = "SELECT column1 "
sql += "column2 "
sql += "FROM table_name"
```

```python
# æ­£ç¡®çš„ä¾‹å­ï¼Œæ·»åŠ é€—å·åˆ†éš”
sql = "SELECT column1, "
sql += "column2 "
sql += "FROM table_name"
```

3. å­—ç¬¦ä¸²è¿æ¥é—®é¢˜ï¼šç¡®ä¿åœ¨æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ä½¿ç”¨é€‚å½“çš„è¿æ¥æ“ä½œç¬¦ï¼Œå¦‚"+"å·æˆ–StringBuilderç±»ï¼ˆå¦‚æœæ˜¯Javaæˆ–C#ç­‰è¯­è¨€ï¼‰ã€‚

ç¤ºä¾‹ï¼š
```python
# é”™è¯¯çš„ä¾‹å­ï¼Œæœªä½¿ç”¨è¿æ¥æ“ä½œç¬¦
sql = "SELECT column1 "
sql += "column2 "
sql += "FROM table_name"
```

```python
# æ­£ç¡®çš„ä¾‹å­ï¼Œä½¿ç”¨è¿æ¥æ“ä½œç¬¦è¿æ¥å­—ç¬¦ä¸²
sql = "SELECT column1 "
sql += "column2 "
sql += "FROM table_name"
```

æ£€æŸ¥å¹¶ä¿®æ­£ä¸Šè¿°é—®é¢˜åï¼ŒFROMå…³é”®å­—åº”è¯¥ä¼šæ­£ç¡®åœ°å‡ºç°åœ¨SQLè¯­å¥ä¸­ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›ç¤ºä¾‹æ˜¯åŸºäºä¸€äº›å¸¸è§çš„æ‹¼æ¥SQLå­—ç¬¦ä¸²çš„è¯­è¨€ï¼Œå…·ä½“è¯­æ³•å¯èƒ½å› ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€è€Œæœ‰æ‰€ä¸åŒã€‚[0m
2023-07-11 17:21:02,238 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 17:21:02,240 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 17:21:02,280 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-11 17:21:02,280 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-11 17:21:05,543 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34m123[0m
2023-07-11 17:21:13,170 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mI'm sorry, but "123" does not provide enough context for me to understand what you are looking for or how I can assist you. Could you please provide more information or clarify your request?[0m
2023-07-12 11:59:31,567 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-12 11:59:31,573 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-12 11:59:32,925 [INFO] [utils.py:473] æ‚¨çš„IPåŒºåŸŸï¼šJapanã€‚
2023-07-12 11:59:33,099 [INFO] [ChuanhuChatbot.py:484] [42m
å·è™çš„æ¸©é¦¨æç¤ºï¼šè®¿é—® http://localhost:7860 æŸ¥çœ‹ç•Œé¢[0m
2023-07-12 11:59:34,257 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-12 11:59:34,257 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-12 11:59:34,319 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo
2023-07-12 11:59:34,320 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo
2023-07-12 12:00:35,758 [INFO] [index_func.py:38] loading file: é™„ä»¶2ä¸šåŠ¡åˆ†æè¯´æ˜ä¹¦æ¨¡æ¿ 20220504.docx
2023-07-12 12:00:37,329 [ERROR] [index_func.py:83] Error loading file: é™„ä»¶2ä¸šåŠ¡åˆ†æè¯´æ˜ä¹¦æ¨¡æ¿ 20220504.docx
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 59, in get_documents
    texts = loader.load()
            ^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/unstructured.py", line 70, in load
    elements = self._get_elements()
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/word_document.py", line 100, in _get_elements
    from unstructured.partition.docx import partition_docx
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/docx.py", line 33, in <module>
    from unstructured.partition.text_type import (
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/text_type.py", line 21, in <module>
    from unstructured.nlp.tokenize import pos_tag, sent_tokenize, word_tokenize
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 32, in <module>
    _download_nltk_package_if_not_present(package_name, package_category)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 21, in _download_nltk_package_if_not_present
    nltk.find(f"{package_category}/{package_name}")
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 555, in find
    return find(modified_name, paths)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 542, in find
    return ZipFilePathPointer(p, zipentry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 394, in __init__
    zipfile = OpenOnDemandZipFile(os.path.abspath(zipfile))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 935, in __init__
    zipfile.ZipFile.__init__(self, filename)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1302, in __init__
    self._RealGetContents()
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1369, in _RealGetContents
    raise BadZipFile("File is not a zip file")
zipfile.BadZipFile: File is not a zip file
2023-07-12 12:00:37,335 [ERROR] [index_func.py:139] ç´¢å¼•æ„å»ºå¤±è´¥ï¼cannot access local variable 'texts' where it is not associated with a value
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 127, in construct_index
    documents = get_documents(file_src)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 86, in get_documents
    texts = text_splitter.split_documents(texts)
                                          ^^^^^
UnboundLocalError: cannot access local variable 'texts' where it is not associated with a value
2023-07-12 12:00:48,308 [INFO] [index_func.py:38] loading file: é™„ä»¶2ä¸šåŠ¡åˆ†æè¯´æ˜ä¹¦æ¨¡æ¿ 20220504.docx
2023-07-12 12:00:48,313 [ERROR] [index_func.py:83] Error loading file: é™„ä»¶2ä¸šåŠ¡åˆ†æè¯´æ˜ä¹¦æ¨¡æ¿ 20220504.docx
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 59, in get_documents
    texts = loader.load()
            ^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/unstructured.py", line 70, in load
    elements = self._get_elements()
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/word_document.py", line 100, in _get_elements
    from unstructured.partition.docx import partition_docx
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/docx.py", line 33, in <module>
    from unstructured.partition.text_type import (
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/text_type.py", line 21, in <module>
    from unstructured.nlp.tokenize import pos_tag, sent_tokenize, word_tokenize
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 32, in <module>
    _download_nltk_package_if_not_present(package_name, package_category)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 21, in _download_nltk_package_if_not_present
    nltk.find(f"{package_category}/{package_name}")
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 555, in find
    return find(modified_name, paths)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 542, in find
    return ZipFilePathPointer(p, zipentry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 394, in __init__
    zipfile = OpenOnDemandZipFile(os.path.abspath(zipfile))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 935, in __init__
    zipfile.ZipFile.__init__(self, filename)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1302, in __init__
    self._RealGetContents()
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1369, in _RealGetContents
    raise BadZipFile("File is not a zip file")
zipfile.BadZipFile: File is not a zip file
2023-07-12 12:00:48,317 [ERROR] [index_func.py:139] ç´¢å¼•æ„å»ºå¤±è´¥ï¼cannot access local variable 'texts' where it is not associated with a value
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 127, in construct_index
    documents = get_documents(file_src)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 86, in get_documents
    texts = text_splitter.split_documents(texts)
                                          ^^^^^
UnboundLocalError: cannot access local variable 'texts' where it is not associated with a value
2023-07-12 12:00:48,318 [INFO] [base_model.py:295] ç”Ÿæˆå†…å®¹æ€»ç»“ä¸­â€¦â€¦
Traceback (most recent call last):
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/gradio/routes.py", line 439, in run_predict
    output = await app.get_blocks().process_api(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/gradio/blocks.py", line 1384, in process_api
    result = await self.call_function(
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/gradio/blocks.py", line 1089, in call_function
    prediction = await anyio.to_thread.run_sync(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/gradio/utils.py", line 700, in wrapper
    response = f(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/utils.py", line 123, in handle_summarize_index
    return current_model.summarize_index(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/models/base_model.py", line 305, in summarize_index
    summary = chain({"input_documents": list(index.docstore.__dict__["_dict"].values())}, return_only_outputs=True)["output_text"]
                                             ^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'docstore'
2023-07-12 13:50:02,029 [INFO] [index_func.py:123] æ‰¾åˆ°äº†ç¼“å­˜çš„ç´¢å¼•æ–‡ä»¶ï¼ŒåŠ è½½ä¸­â€¦â€¦
2023-07-12 13:50:02,039 [INFO] [loader.py:64] Loading faiss.
2023-07-12 13:50:02,155 [INFO] [loader.py:66] Successfully loaded faiss.
2023-07-12 13:50:19,444 [INFO] [index_func.py:123] æ‰¾åˆ°äº†ç¼“å­˜çš„ç´¢å¼•æ–‡ä»¶ï¼ŒåŠ è½½ä¸­â€¦â€¦
2023-07-12 13:50:19,447 [INFO] [base_model.py:295] ç”Ÿæˆå†…å®¹æ€»ç»“ä¸­â€¦â€¦
2023-07-12 14:02:54,524 [WARNING] [connectionpool.py:823] Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', RemoteDisconnected('Remote end closed connection without response'))': /v1/chat/completions
2023-07-12 14:04:26,211 [WARNING] [connectionpool.py:823] Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', RemoteDisconnected('Remote end closed connection without response'))': /v1/chat/completions
2023-07-12 14:10:25,442 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:10:25,446 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 1.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:10:26,917 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:10:26,918 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 2.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:10:29,696 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:10:29,697 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 4.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:11:22,544 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:11:22,546 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 1.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:11:23,967 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:11:23,968 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 2.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:11:26,455 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:11:26,456 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 4.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:11:31,849 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:11:31,851 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 8.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:11:53,048 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:11:53,049 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 1.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:14:51,121 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 1.0 seconds as it raised ServiceUnavailableError: The server is overloaded or not ready yet..
2023-07-12 14:14:52,554 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:14:52,556 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 2.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:15:31,570 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:15:31,572 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 1.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:15:33,004 [INFO] [util.py:67] error_code=rate_limit_exceeded error_message='Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method.' error_param=None error_type=requests message='OpenAI API error received' stream_error=False
2023-07-12 14:15:33,005 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 2.0 seconds as it raised RateLimitError: Rate limit reached for default-gpt-3.5-turbo in organization org-6RgVUqgosH7nn13tyF7od9ox on requests per min. Limit: 3 / min. Please try again in 20s. Contact us through our help center at help.openai.com if you continue to have issues. Please add a payment method to your account to increase your rate limit. Visit https://platform.openai.com/account/billing to add a payment method..
2023-07-12 14:16:14,585 [WARNING] [before_sleep.py:65] Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.<locals>._completion_with_retry in 1.0 seconds as it raised ServiceUnavailableError: The server is overloaded or not ready yet..
2023-07-12 17:07:47,981 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mä»€ä¹ˆå«æ•°å­—æ—¶ä»£[0m
2023-07-12 17:08:28,881 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mæ•°å­—æ—¶ä»£æ˜¯æŒ‡ä¿¡æ¯å’Œé€šä¿¡æŠ€æœ¯è¿…é€Ÿå‘å±•çš„æ—¶ä»£ï¼Œä¹Ÿè¢«ç§°ä¸ºä¿¡æ¯æ—¶ä»£ã€ç½‘ç»œæ—¶ä»£ã€ç”µå­æ—¶ä»£ç­‰ã€‚åœ¨æ•°å­—æ—¶ä»£ï¼Œäººä»¬ä½¿ç”¨æ•°å­—æŠ€æœ¯å’Œäº’è”ç½‘æ¥è·å–å’Œä¼ é€’ä¿¡æ¯ã€è¿›è¡Œäº¤æµå’Œäº¤æ˜“ã€‚æ•°å­—æŠ€æœ¯çš„å¿«é€Ÿå‘å±•å·²ç»æ”¹å˜äº†äººä»¬çš„ç”Ÿæ´»æ–¹å¼ã€å·¥ä½œæ–¹å¼ã€ç¤¾äº¤æ–¹å¼ç­‰æ–¹æ–¹é¢é¢ã€‚åœ¨æ•°å­—æ—¶ä»£ï¼Œäººä»¬å¯ä»¥é€šè¿‡äº’è”ç½‘è·å–ä¸°å¯Œå¤šæ ·çš„ä¿¡æ¯ï¼Œä¸è¿œåœ¨å¤©è¾¹çš„äººè¿›è¡Œå®æ—¶çš„æ²Ÿé€šï¼Œä½¿ç”¨å„ç§æ•°å­—å·¥å…·å’Œåº”ç”¨ç¨‹åºæé«˜å·¥ä½œæ•ˆç‡ï¼Œè¿›è¡Œç½‘ä¸Šè´­ç‰©ã€åœ¨çº¿æ”¯ä»˜ç­‰ã€‚æ•°å­—æ—¶ä»£ä¹Ÿå¸¦æ¥äº†è®¸å¤šæ–°çš„æœºé‡å’ŒæŒ‘æˆ˜ï¼Œä¾‹å¦‚ç½‘ç»œéšç§å’Œå®‰å…¨é—®é¢˜ã€ä¿¡æ¯è¶…è½½ç­‰ã€‚æ€»ä½“è€Œè¨€ï¼Œæ•°å­—æ—¶ä»£æ˜¯ä¸€ä¸ªä¿¡æ¯äº¤æµå¿«é€Ÿã€æ•°å­—åŒ–ç¨‹åº¦é«˜ã€å…¨çƒäº’è”çš„æ—¶ä»£ã€‚[0m
2023-07-12 17:37:37,520 [INFO] [index_func.py:38] loading file: æ¸©æ°æŠ•èµ„ç®¡ç†ç³»ç»Ÿå»ºè®¾æƒ…å†µæ±‡æŠ¥05084.pptx
2023-07-12 17:37:38,221 [ERROR] [index_func.py:83] Error loading file: æ¸©æ°æŠ•èµ„ç®¡ç†ç³»ç»Ÿå»ºè®¾æƒ…å†µæ±‡æŠ¥05084.pptx
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 64, in get_documents
    texts = loader.load()
            ^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/unstructured.py", line 70, in load
    elements = self._get_elements()
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/powerpoint.py", line 41, in _get_elements
    from unstructured.partition.pptx import partition_pptx
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/pptx.py", line 23, in <module>
    from unstructured.partition.text_type import (
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/text_type.py", line 21, in <module>
    from unstructured.nlp.tokenize import pos_tag, sent_tokenize, word_tokenize
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 32, in <module>
    _download_nltk_package_if_not_present(package_name, package_category)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 21, in _download_nltk_package_if_not_present
    nltk.find(f"{package_category}/{package_name}")
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 555, in find
    return find(modified_name, paths)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 542, in find
    return ZipFilePathPointer(p, zipentry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 394, in __init__
    zipfile = OpenOnDemandZipFile(os.path.abspath(zipfile))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 935, in __init__
    zipfile.ZipFile.__init__(self, filename)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1302, in __init__
    self._RealGetContents()
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1369, in _RealGetContents
    raise BadZipFile("File is not a zip file")
zipfile.BadZipFile: File is not a zip file
2023-07-12 17:37:38,228 [ERROR] [index_func.py:139] ç´¢å¼•æ„å»ºå¤±è´¥ï¼cannot access local variable 'texts' where it is not associated with a value
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 127, in construct_index
    documents = get_documents(file_src)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 86, in get_documents
    texts = text_splitter.split_documents(texts)
                                          ^^^^^
UnboundLocalError: cannot access local variable 'texts' where it is not associated with a value
2023-07-12 17:37:48,505 [INFO] [index_func.py:38] loading file: æ¸©æ°æŠ•èµ„ç®¡ç†ç³»ç»Ÿå»ºè®¾æƒ…å†µæ±‡æŠ¥05084.pptx
2023-07-12 17:37:48,511 [ERROR] [index_func.py:83] Error loading file: æ¸©æ°æŠ•èµ„ç®¡ç†ç³»ç»Ÿå»ºè®¾æƒ…å†µæ±‡æŠ¥05084.pptx
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 64, in get_documents
    texts = loader.load()
            ^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/unstructured.py", line 70, in load
    elements = self._get_elements()
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/powerpoint.py", line 41, in _get_elements
    from unstructured.partition.pptx import partition_pptx
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/pptx.py", line 23, in <module>
    from unstructured.partition.text_type import (
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/text_type.py", line 21, in <module>
    from unstructured.nlp.tokenize import pos_tag, sent_tokenize, word_tokenize
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 32, in <module>
    _download_nltk_package_if_not_present(package_name, package_category)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 21, in _download_nltk_package_if_not_present
    nltk.find(f"{package_category}/{package_name}")
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 555, in find
    return find(modified_name, paths)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 542, in find
    return ZipFilePathPointer(p, zipentry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 394, in __init__
    zipfile = OpenOnDemandZipFile(os.path.abspath(zipfile))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 935, in __init__
    zipfile.ZipFile.__init__(self, filename)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1302, in __init__
    self._RealGetContents()
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1369, in _RealGetContents
    raise BadZipFile("File is not a zip file")
zipfile.BadZipFile: File is not a zip file
2023-07-12 17:37:48,513 [ERROR] [index_func.py:139] ç´¢å¼•æ„å»ºå¤±è´¥ï¼cannot access local variable 'texts' where it is not associated with a value
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 127, in construct_index
    documents = get_documents(file_src)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 86, in get_documents
    texts = text_splitter.split_documents(texts)
                                          ^^^^^
UnboundLocalError: cannot access local variable 'texts' where it is not associated with a value
2023-07-12 17:37:48,514 [INFO] [base_model.py:295] ç”Ÿæˆå†…å®¹æ€»ç»“ä¸­â€¦â€¦
Traceback (most recent call last):
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/gradio/routes.py", line 439, in run_predict
    output = await app.get_blocks().process_api(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/gradio/blocks.py", line 1384, in process_api
    result = await self.call_function(
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/gradio/blocks.py", line 1089, in call_function
    prediction = await anyio.to_thread.run_sync(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/gradio/utils.py", line 700, in wrapper
    response = f(*args, **kwargs)
               ^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/utils.py", line 123, in handle_summarize_index
    return current_model.summarize_index(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/models/base_model.py", line 305, in summarize_index
    summary = chain({"input_documents": list(index.docstore.__dict__["_dict"].values())}, return_only_outputs=True)["output_text"]
                                             ^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'docstore'
2023-07-12 17:38:16,475 [INFO] [index_func.py:38] loading file: æ¸©æ°æŠ•èµ„ç®¡ç†ç³»ç»Ÿå»ºè®¾æƒ…å†µæ±‡æŠ¥05084.pptx
2023-07-12 17:38:16,482 [ERROR] [index_func.py:83] Error loading file: æ¸©æ°æŠ•èµ„ç®¡ç†ç³»ç»Ÿå»ºè®¾æƒ…å†µæ±‡æŠ¥05084.pptx
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 64, in get_documents
    texts = loader.load()
            ^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/unstructured.py", line 70, in load
    elements = self._get_elements()
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/langchain/document_loaders/powerpoint.py", line 41, in _get_elements
    from unstructured.partition.pptx import partition_pptx
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/pptx.py", line 23, in <module>
    from unstructured.partition.text_type import (
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/partition/text_type.py", line 21, in <module>
    from unstructured.nlp.tokenize import pos_tag, sent_tokenize, word_tokenize
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 32, in <module>
    _download_nltk_package_if_not_present(package_name, package_category)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/unstructured/nlp/tokenize.py", line 21, in _download_nltk_package_if_not_present
    nltk.find(f"{package_category}/{package_name}")
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 555, in find
    return find(modified_name, paths)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 542, in find
    return ZipFilePathPointer(p, zipentry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 394, in __init__
    zipfile = OpenOnDemandZipFile(os.path.abspath(zipfile))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/compat.py", line 41, in _decorator
    return init_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/site-packages/nltk/data.py", line 935, in __init__
    zipfile.ZipFile.__init__(self, filename)
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1302, in __init__
    self._RealGetContents()
  File "/Users/wangjiahao/miniconda3/envs/chuanhu_env/lib/python3.11/zipfile.py", line 1369, in _RealGetContents
    raise BadZipFile("File is not a zip file")
zipfile.BadZipFile: File is not a zip file
2023-07-12 17:38:16,484 [ERROR] [index_func.py:139] ç´¢å¼•æ„å»ºå¤±è´¥ï¼cannot access local variable 'texts' where it is not associated with a value
Traceback (most recent call last):
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 127, in construct_index
    documents = get_documents(file_src)
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wangjiahao/work/github/LLMs/V0.0.5/ChuanhuChatGPT/modules/index_func.py", line 86, in get_documents
    texts = text_splitter.split_documents(texts)
                                          ^^^^^
UnboundLocalError: cannot access local variable 'texts' where it is not associated with a value
2023-07-12 23:29:46,551 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34m1[0m
2023-07-12 23:30:15,023 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mæŠ±æ­‰ï¼Œæˆ‘ä¹‹å‰çš„å›ç­”å¹¶ä¸æ˜¯å¾ˆè¯¦ç»†ã€‚æ•°å­—æ—¶ä»£æŒ‡çš„æ˜¯åœ¨ç§‘æŠ€å’Œæ•°å­—æŠ€æœ¯å‘å±•çš„èƒŒæ™¯ä¸‹ï¼Œäººä»¬ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢éƒ½å—åˆ°æ•°å­—åŒ–çš„å½±å“ã€‚è¿™åŒ…æ‹¬åœ¨é€šä¿¡ã€å¨±ä¹ã€äº¤æ˜“ã€æ•™è‚²ã€åŒ»ç–—ç­‰é¢†åŸŸä¸­ä½¿ç”¨æ•°å­—æŠ€æœ¯è¿›è¡Œæ“ä½œå’Œå¤„ç†ã€‚æ•°å­—æ—¶ä»£å¸¦æ¥äº†å¤§é‡çš„æ•°å­—åŒ–ä¿¡æ¯å’Œæ•°æ®ï¼Œæ”¹å˜äº†äººä»¬çš„ç”Ÿæ´»æ–¹å¼ï¼Œä¾‹å¦‚é€šè¿‡æ™ºèƒ½æ‰‹æœºå’Œç¤¾äº¤åª’ä½“è¿›è¡Œç¤¾äº¤äº’åŠ¨ã€åœ¨çº¿è´­ç‰©ã€æ•°å­—æ”¯ä»˜å’Œç½‘ä¸Šé“¶è¡Œä¸šåŠ¡ã€åœ¨çº¿å­¦ä¹ å’Œè¿œç¨‹åŠå…¬ç­‰ã€‚æ•°å­—æ—¶ä»£ä¹ŸåŠ é€Ÿäº†ç§‘æŠ€åˆ›æ–°çš„é€Ÿåº¦ï¼Œæ¨åŠ¨äº†äººå·¥æ™ºèƒ½ã€ç‰©è”ç½‘ã€è™šæ‹Ÿç°å®ç­‰é¢†åŸŸçš„å‘å±•ã€‚è¿™ä¸ªæ—¶ä»£å¯¹äºä¸ªäººã€ä¼ä¸šã€æ”¿åºœå’Œç¤¾ä¼šéƒ½å¸¦æ¥äº†è®¸å¤šæœºé‡å’ŒæŒ‘æˆ˜ï¼Œéœ€è¦é€‚åº”å’Œåº”å¯¹ä¸æ–­å˜åŒ–çš„æ–°æŠ€æœ¯å’Œæ–°è¶‹åŠ¿ã€‚[0m
2023-07-13 15:08:41,171 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34morg.apache.poi.poifs.filesystem.NotOLE2FileException: Invalid header signature; read 0xCFBA2B6A6A414E6C, expected 0xE11AB1A1E011CFD0 - Your file appears not to be a valid OLE2 document[0m
2023-07-13 15:09:05,684 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mè¿™ä¸ªé”™è¯¯ä¿¡æ¯æ˜¯åœ¨ä½¿ç”¨Apache POIåº“æ—¶å‡ºç°çš„ï¼Œæ„å‘³ç€ä½ æ­£åœ¨å°è¯•è¯»å–ä¸€ä¸ªæ— æ•ˆçš„OLE2æ–‡ä»¶ã€‚OLE2æ˜¯ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œå¸¸ç”¨äºMicrosoft Officeçš„æ—©æœŸç‰ˆæœ¬ä¸­ã€‚æ ¹æ®é”™è¯¯æ¶ˆæ¯ï¼Œä½ çš„æ–‡ä»¶çš„æ–‡ä»¶å¤´ç­¾åä¸æ˜¯é¢„æœŸçš„0xE11AB1A1E011CFD0ï¼Œè€Œæ˜¯0xCFBA2B6A6A414E6Cï¼Œå› æ­¤Apache POIæ— æ³•æ­£ç¡®è§£æè¯¥æ–‡ä»¶ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š

1. ç¡®è®¤fileå¯¹è±¡æŒ‡å‘çš„æ–‡ä»¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„OLE2æ–‡ä»¶ï¼Œç¡®ä¿å®ƒå…·æœ‰æ­£ç¡®çš„æ–‡ä»¶æ‰©å±•åå’Œæ–‡ä»¶æ ¼å¼ã€‚ä½ å¯ä»¥å°è¯•æ‰‹åŠ¨æ‰“å¼€è¯¥æ–‡ä»¶æ¥éªŒè¯å®ƒæ˜¯å¦èƒ½å¤Ÿåœ¨ç›¸åº”çš„åº”ç”¨ç¨‹åºä¸­æ­£ç¡®æ‰“å¼€ã€‚

2. æ£€æŸ¥ä½ çš„ä»£ç ï¼Œç¡®ä¿ä½ æ­£åœ¨ä½¿ç”¨æ­£ç¡®çš„Apache POIåº“ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä½¿ç”¨æ­£ç¡®çš„æ–¹æ³•æ¥è¯»å–å’Œå¤„ç†OLE2æ–‡ä»¶ã€‚

3. å¦‚æœä½ çš„æ–‡ä»¶ä¸æ˜¯æœ‰æ•ˆçš„OLE2æ–‡ä»¶ï¼Œä½ å¯èƒ½éœ€è¦è½¬æ¢æ–‡ä»¶æ ¼å¼æˆ–ä½¿ç”¨å…¶ä»–é€‚å½“çš„åº“æ¥å¤„ç†å®ƒã€‚

æ³¨æ„ï¼šå¦‚æœä½ æ­£åœ¨å°è¯•è¯»å–çš„æ˜¯ä¸€ä¸ªä¸æ˜¯OLE2æ ¼å¼çš„æ–‡ä»¶ï¼Œä½ éœ€è¦æ‰¾åˆ°æ­£ç¡®çš„åº“æ¥å¤„ç†è¯¥æ–‡ä»¶ã€‚Apache POIä¸“é—¨ç”¨äºå¤„ç†Microsoft Officeæ ¼å¼çš„æ–‡ä»¶ï¼Œå¦‚.docã€.xlså’Œ.pptç­‰æ–‡ä»¶ã€‚å¦‚æœä½ è¦è¯»å–å…¶ä»–æ ¼å¼çš„æ–‡ä»¶ï¼ˆå¦‚.docxã€.xlsxã€.pptxï¼‰ï¼Œåˆ™éœ€è¦ä½¿ç”¨ä¸åŒçš„åº“ï¼Œå¦‚Apache POIçš„XSSFã€SXSSFå’ŒHSSFæ’ä»¶ã€‚[0m
2023-07-13 15:09:28,115 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mjava.lang.IllegalArgumentException: The document is really a PDF file[0m
2023-07-13 15:09:47,034 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mè¯¥é”™è¯¯ä¿¡æ¯è¡¨æ˜ä½ æ­£åœ¨å°è¯•å°†ä¸€ä¸ªæ–‡ä»¶å½“ä½œPDFæ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œä½†å®é™…ä¸Šè¯¥æ–‡ä»¶å¹¶ä¸æ˜¯æœ‰æ•ˆçš„PDFæ–‡ä»¶ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. ç¡®ä¿ä½ æ­£åœ¨å¤„ç†çš„æ–‡ä»¶ç¡®å®æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„PDFæ–‡ä»¶ã€‚ä½ å¯ä»¥å°è¯•ä½¿ç”¨PDFé˜…è¯»å™¨æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºå†…å®¹ã€‚

2. æ£€æŸ¥ä½ çš„ä»£ç ï¼Œç¡®è®¤ä½ æ­£åœ¨ä½¿ç”¨æ­£ç¡®çš„æ–¹æ³•å’Œåº“æ¥è¯»å–å’Œå¤„ç†PDFæ–‡ä»¶ã€‚å¸¸ç”¨çš„Javaåº“åŒ…æ‹¬iTextã€Apache PDFBoxç­‰ï¼Œä½ éœ€è¦ç¡®ä¿ä½ ä½¿ç”¨çš„æ˜¯é€‚ç”¨äºPDFæ–‡ä»¶çš„æ­£ç¡®åº“å’Œç‰ˆæœ¬ã€‚

3. å¦‚æœä½ ç¡®å®šæ–‡ä»¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„PDFæ–‡ä»¶ï¼Œä½†ä»ç„¶å‡ºç°è¯¥é”™è¯¯ï¼Œå¯èƒ½æ˜¯æ–‡ä»¶æœ¬èº«å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚ä½ å¯ä»¥å°è¯•ä½¿ç”¨å…¶ä»–PDFå·¥å…·é‡æ–°ä¿å­˜è¯¥æ–‡ä»¶ï¼Œæˆ–è€…ä½¿ç”¨PDFä¿®å¤å·¥å…·å°†å…¶ä¿®å¤ã€‚ä¹‹åå°è¯•é‡æ–°å¤„ç†è¯¥æ–‡ä»¶ã€‚

æ€»ä¹‹ï¼Œè¦è§£å†³è¯¥é”™è¯¯ï¼Œä½ éœ€è¦ç¡®è®¤æ–‡ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„PDFæ–‡ä»¶ï¼Œå¹¶ä¸”ç¡®ä¿ä½ ä½¿ç”¨æ­£ç¡®çš„åº“å’Œæ–¹æ³•æ¥è¯»å–å’Œå¤„ç†å®ƒã€‚å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥æ£€æŸ¥æ–‡ä»¶æœ¬èº«çš„å®Œæ•´æ€§å’Œä¿®å¤æ–¹å¼ã€‚[0m
2023-07-13 18:33:25,883 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34må†™å…¥com.anxin.init.entity.ProjectDebtImportæ—¶å‡ºé”™: /Users/wangjiahao/work/anxin/gzct/server/jbs-dist/target/classes/com/anxin/init/entity/ProjectDebtImport.class: Too many open files[0m
2023-07-13 18:33:42,915 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mè¯¥é”™è¯¯æç¤ºæ˜¯ç”±äºæ‰“å¼€çš„æ–‡ä»¶æ•°é‡è¶…è¿‡ç³»ç»Ÿé™åˆ¶è€Œå¯¼è‡´çš„ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š

1. æ£€æŸ¥ä½ çš„ä»£ç ï¼Œç¡®ä¿åœ¨æ“ä½œæ–‡ä»¶æ—¶ï¼Œæ¯æ¬¡è¯»å†™æ–‡ä»¶åéƒ½æ­£ç¡®åœ°å…³é—­æ–‡ä»¶æµã€‚ç¡®ä¿åœ¨å¤„ç†å®Œä¸€ä¸ªæ–‡ä»¶åï¼Œè°ƒç”¨ç›¸åº”çš„close()æ–¹æ³•å…³é—­æ–‡ä»¶æµï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚

2. æ£€æŸ¥ç³»ç»Ÿçš„æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚æ–‡ä»¶æè¿°ç¬¦æ˜¯æ“ä½œç³»ç»Ÿç”¨æ¥è¡¨ç¤ºä¸€ä¸ªæ‰“å¼€æ–‡ä»¶çš„æ•°å­—æ ‡è¯†ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€å®šæ•°é‡çš„æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚ä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹æ“ä½œç³»ç»Ÿçš„æ–‡æ¡£æˆ–ä½¿ç”¨å‘½ä»¤`ulimit -n`æ¥æŸ¥çœ‹æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚å¦‚æœé™åˆ¶è¾ƒä½ï¼Œä½ å¯ä»¥å°è¯•å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚

3. æ£€æŸ¥ä½ çš„ä»£ç ä¸­æ˜¯å¦å­˜åœ¨æ–‡ä»¶æµæœªæ­£ç¡®å…³é—­çš„BUGã€‚å¯èƒ½æ˜¯æŸä¸ªåœ°æ–¹çš„ä»£ç æ²¡æœ‰æ­£ç¡®åœ°å…³é—­æ–‡ä»¶æµï¼Œå¯¼è‡´æ–‡ä»¶å¥æŸ„ä¸€ç›´å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œè¿›è€Œè¶…è¿‡äº†æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ã€‚ä»”ç»†æ£€æŸ¥ä»£ç é€»è¾‘ï¼Œç¡®ä¿åœ¨é€‚å½“çš„æ—¶å€™å…³é—­æ–‡ä»¶æµã€‚

4. å¦‚æœä½ çš„ç³»ç»Ÿè¿è¡Œäº†ä¸€æ®µæ—¶é—´åæ‰å‡ºç°è¯¥é”™è¯¯ï¼Œå¯èƒ½æ˜¯ç”±äºèµ„æºæ³„æ¼å¯¼è‡´çš„ã€‚å¯ä»¥ä½¿ç”¨ä¸€äº›å†…å­˜å’Œèµ„æºæ£€æµ‹å·¥å…·æ¥å¸®åŠ©ä½ æ‰¾åˆ°èµ„æºæ³„æ¼çš„ä½ç½®ï¼Œå¹¶åŠæ—¶é‡Šæ”¾ç›¸åº”èµ„æºã€‚

æ€»ç»“èµ·æ¥ï¼Œè¦è§£å†³"Too many open files"é”™è¯¯ï¼Œä½ éœ€è¦ç¡®ä¿åœ¨æ­£ç¡®çš„ä½ç½®å…³é—­æ–‡ä»¶æµã€å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶å¹¶æ£€æŸ¥ä»£ç ä¸­æ˜¯å¦å­˜åœ¨èµ„æºæ³„æ¼ç­‰é—®é¢˜ã€‚[0m
2023-07-17 14:47:20,074 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mselect X.* ,
to_char((X.gp-X.lastyearegp),'fm999999999990.00') as gpdiff
from (select 
      a.rowid row_noid,
      a.item,
      b.ACCT_GRP,
      b.ACCT_DEPT,
      b.item_name,
      b.vendor_code,
      c.vendor_name,
      to_char(f.cost,'fm9999999999999990.000000') cost,
      to_char(a.mm_cost,'fm9999999999999990.000000') mm_cost,
      to_char((f.cost-a.mm_cost)/f.cost*100,'fm9990.00')||'%' de_cost,to_char(s.price,'fm999999999990.00') price,
      to_char(a.mm_price,'fm999999999990.00') mm_price,
      to_char((b.price-a.mm_price)/b.price*100,'fm999990.00')||'%' de_price,
      substr(a.veff_date_from,1,4)||'-'||substr(a.veff_date_from,5,2)||'-'||substr(a.veff_date_from,7,2)||'~'||substr(a.veff_date_to,1,4)||'-'||substr(a.veff_date_to,5,2)||'-'||substr(a.veff_date_to,7,2) veff_date,
			substr(a.mm_start_date,1,4)||'-'||substr(a.mm_start_date,5,2)||'-'||substr(a.mm_start_date,7,2)||'~'||substr(a.mm_end_date,1,4)||'-'||substr(a.mm_end_date,5,2)||'-'||substr(a.mm_end_date,7,2) mm_date,
      decode(a.mod_price_reason,'1','ä¿ƒé”€','2','å‚å•†æˆæœ¬è°ƒä»·','3','å…¶å®ƒ') reason,
			to_char(nvl(e.dms,0),'fm99990') dms,
			to_char(a.pre_dms,'fm99990') pre_dms,
      to_char((b.price-f.cost*(1+d.taxrate))/b.price*100,'fm9990.00')||'%' gp1,
			decode(b.price-a.mm_price,'0','#DIV/0!',to_char((f.cost-a.mm_cost)*(1+d.taxrate)/(b.price-a.mm_price)*100,'fm9990.00')||'%') tran_profit,
      decode(a.mm_price,'0','#DIV/0!',to_char((a.mm_price-a.mm_cost*(1+d.taxrate))/a.mm_price*100,'fm9990.00')||'%') gp2,
			decode(a.mod_price_reason,'2',to_char(to_date(a.veff_date_to,'yyyymmdd')- to_date(a.veff_date_from,'yyyymmdd')+1),decode(a.sales_days,'999','é•¿æœŸ',a.sales_days)) sales_days,  
      decode(a.mod_price_reason,'2',decode(a.mm_price,'0','#DIV/0!',decode(a.sales_days,'999','é•¿æœŸä¿ƒé”€',to_char(a.mm_price*a.pre_dms*((a.mm_price-a.mm_cost*(1+d.taxrate))/a.mm_price)*(to_date(a.veff_date_to,'yyyymmdd')-to_date(a.veff_date_from,'yyyymmdd')+1)-b.price*to_char(nvl(e.dms,0),'fm99990')*((b.price-f.cost*(1+d.taxrate))/b.price)*(to_date(a.veff_date_to,'yyyymmdd')-to_date(a.veff_date_from,'yyyymmdd')+1),'fm9999999990'))),decode(a.mm_price,'0','#DIV/0!',decode(a.sales_days,'999','é•¿æœŸä¿ƒé”€',to_char(a.mm_price*a.pre_dms*((a.mm_price-a.mm_cost*(1+d.taxrate))/a.mm_price)*a.sales_days-b.price*to_char(nvl(e.dms,0),'fm99990')*((b.price-f.cost*(1+d.taxrate))/b.price)*a.sales_days,'fm9999999990')))) gross_profit,
      a.mm_method,
      decode(a.dist_method,'1','å‚å•†è®©åˆ©','2','äº‹åè¡¥å·®') dist_method,
      a.remark,
      a.mod_price_reason reason2,
      a.dist_method method2,
      a.upd_user,a.upd_date,
      a.upd_time,
      a.sales_days sales_days2,
      nvl(ry.GP,-999) GP,
      nvl(ry.SALE_PER,-999)||'%' SALE_PER,
      nvl(ry.SALEQTYTOT,-999) SALEQTYTOT,
			COALESCE(lgp.GP, -999) AS lastyearegp,
			gor.MMTOTQTY as MMTOTQTY,
			qua.TOTALQUA
  from mm_control a,sb005 b,sb003 c,taxtype d,ana17 e,
  (select a.item,a.cost
   from SB005ZONE_COST a,
   (SELECT A.ITEM, max(A.EFF_DATE) EFF_DATE2
   FROM SB005ZONE_COST A
   WHERE A.STATUS LIKE '1'
   group by a.item) b
   where a.eff_date = b.EFF_DATE2 and a.item = b.item) f,
 (SELECT a.* FROM (SELECT max(a.eff_date) as eff_date,a.item FROM sb005zone_price a where a.item like '%' and a.status = 1 group by a.item)a) g,
 sb005zone_price s,
 (SELECT A.*
FROM (SELECT A.ITEM,
               A.ITEM_NAME,
               NVL(SALEQTYTOT,0) AS SALEQTYTOT,
							 NVL(SALEAMTTOT,0) AS SALEAMTTOT,
               DECODE(NVL(B.SALEAMTTOT,0),0,0,ROUND((NVL(B.SALEAMTTOT,0)-NVL(B.COSTAMTTOT,0))/NVL(B.SALEAMTTOT,0),4)*100) AS SALE_PER,
							 (DECODE(NVL(B.SALEAMTTOT,0),0,0,ROUND((NVL(B.SALEAMTTOT,0)-NVL(B.COSTAMTTOT,0))/NVL(B.SALEAMTTOT,0),4)*100)/100)*NVL(SALEAMTTOT,0) GP
          FROM (SELECT SB005.ITEM,SB005.ITEM_NAME,status,Price,ITEM_LEVEL,SB005.ACCT_GRP
                  FROM SB005
                  WHERE 
                  SB005.ACCT_DEPT     LIKE '%'
                  AND SB005.ACCT_CATEGORY LIKE '%'
                  AND SB005.MARKOUTTYPE LIKE '%'
                  
               )A,
              (SELECT ITEMNO,
                      SUM(SALEQTYTOT) AS SALEQTYTOT,SUM(SALEAMTTOT) AS SALEAMTTOT,SUM(COSTAMTTOT) AS COSTAMTTOT,
                      MAX(UNITPRICE) AS UNITPRICE,SUM(MKTQTYTOT) AS MKTQTYTOT,SUM(MKTAMTTOT) AS MKTAMTTOT,
                      SUM(DLVQTYTOT) AS DLVQTYTOT,SUM(DLVAMTTOT) AS DLVAMTTOT,
                      SUM(NVL(STORE_CNT,0)) SALE_STORE_NUM
                 FROM ANA03
                WHERE ZONENO  = '00'
                  AND STORENO = '000000'   
                  AND STORENO not in (select storeid from ia_n_storeid)
                  AND BUSIDATE BETWEEN TO_DATE('20230712','YYYYMMDD') AND TO_DATE('20230725','YYYYMMDD')
                  AND CATNO   LIKE '%'
                GROUP BY ITEMNO)B
          WHERE A.ITEM = B.ITEMNO
          )A,
		(SELECT ITEM_NO,max(BC_PER) BC_PER FROM SCQ20A_T2 group by ITEM_NO) B
          where A.item = B.ITEM_NO(+)
					ORDER BY SALEAMTTOT DESC) ry
 ,
 (SELECT A.*
FROM (SELECT A.ITEM,
               A.ITEM_NAME,
               NVL(SALEQTYTOT,0) AS SALEQTYTOT,
							 NVL(SALEAMTTOT,0) AS SALEAMTTOT,
               DECODE(NVL(B.SALEAMTTOT,0),0,0,ROUND((NVL(B.SALEAMTTOT,0)-NVL(B.COSTAMTTOT,0))/NVL(B.SALEAMTTOT,0),4)*100) AS SALE_PER,
							 (DECODE(NVL(B.SALEAMTTOT,0),0,0,ROUND((NVL(B.SALEAMTTOT,0)-NVL(B.COSTAMTTOT,0))/NVL(B.SALEAMTTOT,0),4)*100)/100)*NVL(SALEAMTTOT,0) GP
          FROM (SELECT SB005.ITEM,SB005.ITEM_NAME,status,Price,ITEM_LEVEL,SB005.ACCT_GRP
                  FROM SB005
                  WHERE 
                  SB005.ACCT_DEPT     LIKE '%'
                  AND SB005.ACCT_CATEGORY LIKE '%'
                  AND SB005.MARKOUTTYPE LIKE '%'
                  
               )A,
              (SELECT ITEMNO,
                      SUM(SALEQTYTOT) AS SALEQTYTOT,SUM(SALEAMTTOT) AS SALEAMTTOT,SUM(COSTAMTTOT) AS COSTAMTTOT,
                      MAX(UNITPRICE) AS UNITPRICE,SUM(MKTQTYTOT) AS MKTQTYTOT,SUM(MKTAMTTOT) AS MKTAMTTOT,
                      SUM(DLVQTYTOT) AS DLVQTYTOT,SUM(DLVAMTTOT) AS DLVAMTTOT,
                      SUM(NVL(STORE_CNT,0)) SALE_STORE_NUM
                 FROM ANA03
                WHERE ZONENO  = '00'
                  AND STORENO = '000000'   
                  AND STORENO not in (select storeid from ia_n_storeid)
                  AND BUSIDATE BETWEEN TO_DATE('20230628','YYYYMMDD') AND TO_DATE('20230711','YYYYMMDD')
                  AND CATNO   LIKE '%'
                GROUP BY ITEMNO)B
          WHERE A.ITEM = B.ITEMNO
          )A,
		(SELECT ITEM_NO,max(BC_PER) BC_PER FROM SCQ20A_T2 group by ITEM_NO) B
          where A.item = B.ITEM_NO(+)
					ORDER BY SALEAMTTOT DESC) lgp,
		(select G.item, sum(G.MMTOTQTY) as MMTOTQTY from (
select ROWNUM as ROW_SEQ,a.item,a.store,a.zoneno,a.mmno,a.screenname,
       decode(a.storename,'00','00å…¨åŒº',a.storename) storename,a.UNITPRICE,a.mmunitprice,a.mmtotqty,a.saletotcost,a.mmsaletotamt,
       a.mmtotrebate,a.totamt,a.gp
from (select g.item,b.store,a.mmno,a.screenname,decode(a.zoneno,'',b.work_area_zone,a.zoneno) zoneno,
              decode(b.store||b.store_name,'000000å…¨åº—',a.zoneno||c.work_area_desc,b.store_name) storename,
              a.UNITPRICE,DECODE(a.MMTOTQTY,0,0,a.saletotamt/a.mmtotqty) MMUnitPrice,
              a.mmtotqty,a.saletotcost,a.saletotamt MMSaleTotAmt,a.mmtotrebate,(a.saletotamt-a.mmtotrebate) TotAmt,
              round(decode(a.saletotamt,0,0,(a.saletotamt-a.saletotcost)/a.saletotamt),4)*100 as GP
         from (select decode(a.storeno,'000000',a.zoneno,a.storename) storename,a.zoneno,a.storeno,a.mmno,a.screenname,
                      B.UNITPRICE,a.mmtotqty,a.saletotcost,a.saletotamt,a.mmtotrebate
                 from anammt1 a,(select mmid,discountamount UNITPRICE from mm) b
                where a.zoneno like '%'
                  and a.storeno like '%'
                  and A.mmno like '%'
                  AND a.MMNO=B.MMID(+)
                ORDER BY STORENO,ZONENO) a,
              (SELECT A.STORE,A.STORE_NAME,A.WORK_AREA_ZONE FROM SB001 A
                where sysdate between A.STORE_OPEN_DATE AND A.STORE_CLOSE_DATE
                  and a.store like '%'
               )B,
              (select b.work_area_zone,b.work_area_desc from sb051 b
                where  B.WORK_AREA_DO ='00'
                  AND B.WORK_AREA_FM ='00'
                  AND NOT(B.WORK_AREA_ZONE ='98' OR B.WORK_AREA_ZONE ='99'))C,
									MMGROUP g
   where b.store=a.storeno(+)
     and a.zoneno=c.work_area_zone(+)
		 and a.MMNO = g.MMID
ORDER BY B.STORE,A.ZONENO ) a
  where  a.zoneno = '00'
	and a.STORE = '000000'
	) G
	GROUP BY G.ITEM) gor,
	(select a.item_no,sum(a.totalqua) as totalqua
from (
select hqm02.item_no,sb005v.item_name,hqm01.order_date,hqm01.order_no,dlv_date,deliv_date,
       decode(hqm01.deliv_yn,'Y','å·²æ”¶','N','å¾…æ”¶','D','åˆ å•','') deliv_desc,
       order_qty,deliv_qty/hqm02.unit_class deliv_qty,hqm02.unit_class,hqm01.vendor_code,sb003v.vendor_name,hqm01.req_date,hqm02.req_qty,
			 (order_qty * hqm02.unit_class) AS totalqua
  from hqm01,hqm02,sb005v,sb003v
where hqm01.order_date > to_char(sysdate-90,'yyyymmdd')
   and hqm01.order_no = hqm02.order_no
   and hqm02.item_no=sb005v.item(+)
   and hqm01.vendor_code=sb003v.vendor_code(+)
   and hqm01.order_date between a.veff_date_from and a.veff_date_to
   order by hqm01.order_date,hqm02.item_no,hqm01.vendor_code desc
)a
GROUP BY a.item_no) qua
 where a.item = b.item
   and a.item = e.itemnumber(+)
   and a.item = f.item
   and b.vendor_code = c.vendor_code
   and b.taxid = d.taxid
   and a.item = g.item
   and s.eff_date =g.eff_date
   and a.item= s.item
	 and a.ITEM = gor.ITEM(+)
   and a.item = ry.item(+)
	 and a.item = lgp.item(+)
	 and a.item = qua.ITEM_NO
   and (a.item like '%' or b.item_name like '%')
   and ((a.mm_start_date between '20230712' and '20230725'
         or a.mm_end_date between '20230712' and '20230725')
       or (a.mm_start_date <= '20230725' and a.mm_end_date >= '20230725')) 
   and (('false'='false' and (b.acct_grp in (select distinct d.pmano from mcm05 a, mcm05 b, prm01 c, mcm02 d
                 where ('H004'='H004' or c.uesrid = '23070061')
                   and b.emp_no = d.emp_no
                   and a.emp_no = c.emp_no
                   and b.work_type like a.work_type||'%'
                   and to_char(SYSDATE, 'YYYYMM') between d.st_yymm and d.ed_yymm
                   and to_char(SYSDATE, 'YYYYMM') between b.st_ym and b.ed_ym
                   and to_char(SYSDATE, 'YYYYMM') between a.st_ym and a.ed_ym))) 
           or ('null'='Y' and a.upd_user='23070061') 
           or ('null'='N' and b.acct_grp in (select distinct d.pmano from mcm05 a, mcm05 b, prm01 c, mcm02 d
                where c.uesrid in (select m.resp_emp_no from mcu40 m,prm01 p where m.emp_no=p.emp_no and p.uesrid='23070061')
                  and b.emp_no = d.emp_no
                  and a.emp_no = c.emp_no
                  and b.work_type like a.work_type||'%'
                  and to_char(SYSDATE, 'YYYYMM') between d.st_yymm and d.ed_yymm
                  and to_char(SYSDATE, 'YYYYMM') between b.st_ym and b.ed_ym
                  and to_char(SYSDATE, 'YYYYMM') between a.st_ym and a.ed_ym)))
	-- and b.ACCT_DEPT = '%'
 order by c.vendor_code,a.upd_date desc,a.upd_time desc
 ) X
 -- gor è¡¨
é‡Œé¢çš„and hqm01.order_date between a.veff_date_from and a.veff_date_toæ€ä¹ˆå†™æ‰æ­£ç¡®[0m
2023-07-17 14:47:20,544 [ERROR] [models.py:90] è·å–APIä½¿ç”¨æƒ…å†µå¤±è´¥:HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_date=2023-07-01&end_date=2023-07-31 (Caused by ProxyError('Cannot connect to proxy.', ConnectionResetError(54, 'Connection reset by peer')))
2023-07-17 14:47:20,643 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mâ˜¹ï¸å‘ç”Ÿäº†é”™è¯¯ï¼šè·å–å¯¹è¯æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·æŸ¥çœ‹åå°æ—¥å¿—[0m
2023-07-17 14:47:20,644 [INFO] [base_model.py:467] Token è®¡æ•°: 5362ï¼Œæœ¬æ¬¡å¯¹è¯ç´¯è®¡æ¶ˆè€—äº† 9823 tokens
2023-07-17 14:50:29,609 [INFO] [models.py:559] æ­£åœ¨åŠ è½½OpenAIæ¨¡å‹: gpt-3.5-turbo-16k
2023-07-17 14:50:29,614 [INFO] [models.py:612] æ¨¡å‹è®¾ç½®ä¸ºäº†ï¼š gpt-3.5-turbo-16k
2023-07-17 14:50:35,240 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mselect X.* ,
to_char((X.gp-X.lastyearegp),'fm999999999990.00') as gpdiff
from (select 
      a.rowid row_noid,
      a.item,
      b.ACCT_GRP,
      b.ACCT_DEPT,
      b.item_name,
      b.vendor_code,
      c.vendor_name,
      to_char(f.cost,'fm9999999999999990.000000') cost,
      to_char(a.mm_cost,'fm9999999999999990.000000') mm_cost,
      to_char((f.cost-a.mm_cost)/f.cost*100,'fm9990.00')||'%' de_cost,to_char(s.price,'fm999999999990.00') price,
      to_char(a.mm_price,'fm999999999990.00') mm_price,
      to_char((b.price-a.mm_price)/b.price*100,'fm999990.00')||'%' de_price,
      substr(a.veff_date_from,1,4)||'-'||substr(a.veff_date_from,5,2)||'-'||substr(a.veff_date_from,7,2)||'~'||substr(a.veff_date_to,1,4)||'-'||substr(a.veff_date_to,5,2)||'-'||substr(a.veff_date_to,7,2) veff_date,
			substr(a.mm_start_date,1,4)||'-'||substr(a.mm_start_date,5,2)||'-'||substr(a.mm_start_date,7,2)||'~'||substr(a.mm_end_date,1,4)||'-'||substr(a.mm_end_date,5,2)||'-'||substr(a.mm_end_date,7,2) mm_date,
      decode(a.mod_price_reason,'1','ä¿ƒé”€','2','å‚å•†æˆæœ¬è°ƒä»·','3','å…¶å®ƒ') reason,
			to_char(nvl(e.dms,0),'fm99990') dms,
			to_char(a.pre_dms,'fm99990') pre_dms,
      to_char((b.price-f.cost*(1+d.taxrate))/b.price*100,'fm9990.00')||'%' gp1,
			decode(b.price-a.mm_price,'0','#DIV/0!',to_char((f.cost-a.mm_cost)*(1+d.taxrate)/(b.price-a.mm_price)*100,'fm9990.00')||'%') tran_profit,
      decode(a.mm_price,'0','#DIV/0!',to_char((a.mm_price-a.mm_cost*(1+d.taxrate))/a.mm_price*100,'fm9990.00')||'%') gp2,
			decode(a.mod_price_reason,'2',to_char(to_date(a.veff_date_to,'yyyymmdd')- to_date(a.veff_date_from,'yyyymmdd')+1),decode(a.sales_days,'999','é•¿æœŸ',a.sales_days)) sales_days,  
      decode(a.mod_price_reason,'2',decode(a.mm_price,'0','#DIV/0!',decode(a.sales_days,'999','é•¿æœŸä¿ƒé”€',to_char(a.mm_price*a.pre_dms*((a.mm_price-a.mm_cost*(1+d.taxrate))/a.mm_price)*(to_date(a.veff_date_to,'yyyymmdd')-to_date(a.veff_date_from,'yyyymmdd')+1)-b.price*to_char(nvl(e.dms,0),'fm99990')*((b.price-f.cost*(1+d.taxrate))/b.price)*(to_date(a.veff_date_to,'yyyymmdd')-to_date(a.veff_date_from,'yyyymmdd')+1),'fm9999999990'))),decode(a.mm_price,'0','#DIV/0!',decode(a.sales_days,'999','é•¿æœŸä¿ƒé”€',to_char(a.mm_price*a.pre_dms*((a.mm_price-a.mm_cost*(1+d.taxrate))/a.mm_price)*a.sales_days-b.price*to_char(nvl(e.dms,0),'fm99990')*((b.price-f.cost*(1+d.taxrate))/b.price)*a.sales_days,'fm9999999990')))) gross_profit,
      a.mm_method,
      decode(a.dist_method,'1','å‚å•†è®©åˆ©','2','äº‹åè¡¥å·®') dist_method,
      a.remark,
      a.mod_price_reason reason2,
      a.dist_method method2,
      a.upd_user,a.upd_date,
      a.upd_time,
      a.sales_days sales_days2,
      nvl(ry.GP,-999) GP,
      nvl(ry.SALE_PER,-999)||'%' SALE_PER,
      nvl(ry.SALEQTYTOT,-999) SALEQTYTOT,
			COALESCE(lgp.GP, -999) AS lastyearegp,
			gor.MMTOTQTY as MMTOTQTY,
			qua.TOTALQUA
  from mm_control a,sb005 b,sb003 c,taxtype d,ana17 e,
  (select a.item,a.cost
   from SB005ZONE_COST a,
   (SELECT A.ITEM, max(A.EFF_DATE) EFF_DATE2
   FROM SB005ZONE_COST A
   WHERE A.STATUS LIKE '1'
   group by a.item) b
   where a.eff_date = b.EFF_DATE2 and a.item = b.item) f,
 (SELECT a.* FROM (SELECT max(a.eff_date) as eff_date,a.item FROM sb005zone_price a where a.item like '%' and a.status = 1 group by a.item)a) g,
 sb005zone_price s,
 (SELECT A.*
FROM (SELECT A.ITEM,
               A.ITEM_NAME,
               NVL(SALEQTYTOT,0) AS SALEQTYTOT,
							 NVL(SALEAMTTOT,0) AS SALEAMTTOT,
               DECODE(NVL(B.SALEAMTTOT,0),0,0,ROUND((NVL(B.SALEAMTTOT,0)-NVL(B.COSTAMTTOT,0))/NVL(B.SALEAMTTOT,0),4)*100) AS SALE_PER,
							 (DECODE(NVL(B.SALEAMTTOT,0),0,0,ROUND((NVL(B.SALEAMTTOT,0)-NVL(B.COSTAMTTOT,0))/NVL(B.SALEAMTTOT,0),4)*100)/100)*NVL(SALEAMTTOT,0) GP
          FROM (SELECT SB005.ITEM,SB005.ITEM_NAME,status,Price,ITEM_LEVEL,SB005.ACCT_GRP
                  FROM SB005
                  WHERE 
                  SB005.ACCT_DEPT     LIKE '%'
                  AND SB005.ACCT_CATEGORY LIKE '%'
                  AND SB005.MARKOUTTYPE LIKE '%'
                  
               )A,
              (SELECT ITEMNO,
                      SUM(SALEQTYTOT) AS SALEQTYTOT,SUM(SALEAMTTOT) AS SALEAMTTOT,SUM(COSTAMTTOT) AS COSTAMTTOT,
                      MAX(UNITPRICE) AS UNITPRICE,SUM(MKTQTYTOT) AS MKTQTYTOT,SUM(MKTAMTTOT) AS MKTAMTTOT,
                      SUM(DLVQTYTOT) AS DLVQTYTOT,SUM(DLVAMTTOT) AS DLVAMTTOT,
                      SUM(NVL(STORE_CNT,0)) SALE_STORE_NUM
                 FROM ANA03
                WHERE ZONENO  = '00'
                  AND STORENO = '000000'   
                  AND STORENO not in (select storeid from ia_n_storeid)
                  AND BUSIDATE BETWEEN TO_DATE('20230712','YYYYMMDD') AND TO_DATE('20230725','YYYYMMDD')
                  AND CATNO   LIKE '%'
                GROUP BY ITEMNO)B
          WHERE A.ITEM = B.ITEMNO
          )A,
		(SELECT ITEM_NO,max(BC_PER) BC_PER FROM SCQ20A_T2 group by ITEM_NO) B
          where A.item = B.ITEM_NO(+)
					ORDER BY SALEAMTTOT DESC) ry
 ,
 (SELECT A.*
FROM (SELECT A.ITEM,
               A.ITEM_NAME,
               NVL(SALEQTYTOT,0) AS SALEQTYTOT,
							 NVL(SALEAMTTOT,0) AS SALEAMTTOT,
               DECODE(NVL(B.SALEAMTTOT,0),0,0,ROUND((NVL(B.SALEAMTTOT,0)-NVL(B.COSTAMTTOT,0))/NVL(B.SALEAMTTOT,0),4)*100) AS SALE_PER,
							 (DECODE(NVL(B.SALEAMTTOT,0),0,0,ROUND((NVL(B.SALEAMTTOT,0)-NVL(B.COSTAMTTOT,0))/NVL(B.SALEAMTTOT,0),4)*100)/100)*NVL(SALEAMTTOT,0) GP
          FROM (SELECT SB005.ITEM,SB005.ITEM_NAME,status,Price,ITEM_LEVEL,SB005.ACCT_GRP
                  FROM SB005
                  WHERE 
                  SB005.ACCT_DEPT     LIKE '%'
                  AND SB005.ACCT_CATEGORY LIKE '%'
                  AND SB005.MARKOUTTYPE LIKE '%'
                  
               )A,
              (SELECT ITEMNO,
                      SUM(SALEQTYTOT) AS SALEQTYTOT,SUM(SALEAMTTOT) AS SALEAMTTOT,SUM(COSTAMTTOT) AS COSTAMTTOT,
                      MAX(UNITPRICE) AS UNITPRICE,SUM(MKTQTYTOT) AS MKTQTYTOT,SUM(MKTAMTTOT) AS MKTAMTTOT,
                      SUM(DLVQTYTOT) AS DLVQTYTOT,SUM(DLVAMTTOT) AS DLVAMTTOT,
                      SUM(NVL(STORE_CNT,0)) SALE_STORE_NUM
                 FROM ANA03
                WHERE ZONENO  = '00'
                  AND STORENO = '000000'   
                  AND STORENO not in (select storeid from ia_n_storeid)
                  AND BUSIDATE BETWEEN TO_DATE('20230628','YYYYMMDD') AND TO_DATE('20230711','YYYYMMDD')
                  AND CATNO   LIKE '%'
                GROUP BY ITEMNO)B
          WHERE A.ITEM = B.ITEMNO
          )A,
		(SELECT ITEM_NO,max(BC_PER) BC_PER FROM SCQ20A_T2 group by ITEM_NO) B
          where A.item = B.ITEM_NO(+)
					ORDER BY SALEAMTTOT DESC) lgp,
		(select G.item, sum(G.MMTOTQTY) as MMTOTQTY from (
select ROWNUM as ROW_SEQ,a.item,a.store,a.zoneno,a.mmno,a.screenname,
       decode(a.storename,'00','00å…¨åŒº',a.storename) storename,a.UNITPRICE,a.mmunitprice,a.mmtotqty,a.saletotcost,a.mmsaletotamt,
       a.mmtotrebate,a.totamt,a.gp
from (select g.item,b.store,a.mmno,a.screenname,decode(a.zoneno,'',b.work_area_zone,a.zoneno) zoneno,
              decode(b.store||b.store_name,'000000å…¨åº—',a.zoneno||c.work_area_desc,b.store_name) storename,
              a.UNITPRICE,DECODE(a.MMTOTQTY,0,0,a.saletotamt/a.mmtotqty) MMUnitPrice,
              a.mmtotqty,a.saletotcost,a.saletotamt MMSaleTotAmt,a.mmtotrebate,(a.saletotamt-a.mmtotrebate) TotAmt,
              round(decode(a.saletotamt,0,0,(a.saletotamt-a.saletotcost)/a.saletotamt),4)*100 as GP
         from (select decode(a.storeno,'000000',a.zoneno,a.storename) storename,a.zoneno,a.storeno,a.mmno,a.screenname,
                      B.UNITPRICE,a.mmtotqty,a.saletotcost,a.saletotamt,a.mmtotrebate
                 from anammt1 a,(select mmid,discountamount UNITPRICE from mm) b
                where a.zoneno like '%'
                  and a.storeno like '%'
                  and A.mmno like '%'
                  AND a.MMNO=B.MMID(+)
                ORDER BY STORENO,ZONENO) a,
              (SELECT A.STORE,A.STORE_NAME,A.WORK_AREA_ZONE FROM SB001 A
                where sysdate between A.STORE_OPEN_DATE AND A.STORE_CLOSE_DATE
                  and a.store like '%'
               )B,
              (select b.work_area_zone,b.work_area_desc from sb051 b
                where  B.WORK_AREA_DO ='00'
                  AND B.WORK_AREA_FM ='00'
                  AND NOT(B.WORK_AREA_ZONE ='98' OR B.WORK_AREA_ZONE ='99'))C,
									MMGROUP g
   where b.store=a.storeno(+)
     and a.zoneno=c.work_area_zone(+)
		 and a.MMNO = g.MMID
ORDER BY B.STORE,A.ZONENO ) a
  where  a.zoneno = '00'
	and a.STORE = '000000'
	) G
	GROUP BY G.ITEM) gor,
	(select a.item_no,sum(a.totalqua) as totalqua
from (
select hqm02.item_no,sb005v.item_name,hqm01.order_date,hqm01.order_no,dlv_date,deliv_date,
       decode(hqm01.deliv_yn,'Y','å·²æ”¶','N','å¾…æ”¶','D','åˆ å•','') deliv_desc,
       order_qty,deliv_qty/hqm02.unit_class deliv_qty,hqm02.unit_class,hqm01.vendor_code,sb003v.vendor_name,hqm01.req_date,hqm02.req_qty,
			 (order_qty * hqm02.unit_class) AS totalqua
  from hqm01,hqm02,sb005v,sb003v
where hqm01.order_date > to_char(sysdate-90,'yyyymmdd')
   and hqm01.order_no = hqm02.order_no
   and hqm02.item_no=sb005v.item(+)
   and hqm01.vendor_code=sb003v.vendor_code(+)
   and hqm01.order_date between a.veff_date_from and a.veff_date_to
   order by hqm01.order_date,hqm02.item_no,hqm01.vendor_code desc
)a
GROUP BY a.item_no) qua
 where a.item = b.item
   and a.item = e.itemnumber(+)
   and a.item = f.item
   and b.vendor_code = c.vendor_code
   and b.taxid = d.taxid
   and a.item = g.item
   and s.eff_date =g.eff_date
   and a.item= s.item
	 and a.ITEM = gor.ITEM(+)
   and a.item = ry.item(+)
	 and a.item = lgp.item(+)
	 and a.item = qua.ITEM_NO
   and (a.item like '%' or b.item_name like '%')
   and ((a.mm_start_date between '20230712' and '20230725'
         or a.mm_end_date between '20230712' and '20230725')
       or (a.mm_start_date <= '20230725' and a.mm_end_date >= '20230725')) 
   and (('false'='false' and (b.acct_grp in (select distinct d.pmano from mcm05 a, mcm05 b, prm01 c, mcm02 d
                 where ('H004'='H004' or c.uesrid = '23070061')
                   and b.emp_no = d.emp_no
                   and a.emp_no = c.emp_no
                   and b.work_type like a.work_type||'%'
                   and to_char(SYSDATE, 'YYYYMM') between d.st_yymm and d.ed_yymm
                   and to_char(SYSDATE, 'YYYYMM') between b.st_ym and b.ed_ym
                   and to_char(SYSDATE, 'YYYYMM') between a.st_ym and a.ed_ym))) 
           or ('null'='Y' and a.upd_user='23070061') 
           or ('null'='N' and b.acct_grp in (select distinct d.pmano from mcm05 a, mcm05 b, prm01 c, mcm02 d
                where c.uesrid in (select m.resp_emp_no from mcu40 m,prm01 p where m.emp_no=p.emp_no and p.uesrid='23070061')
                  and b.emp_no = d.emp_no
                  and a.emp_no = c.emp_no
                  and b.work_type like a.work_type||'%'
                  and to_char(SYSDATE, 'YYYYMM') between d.st_yymm and d.ed_yymm
                  and to_char(SYSDATE, 'YYYYMM') between b.st_ym and b.ed_ym
                  and to_char(SYSDATE, 'YYYYMM') between a.st_ym and a.ed_ym)))
	-- and b.ACCT_DEPT = '%'
 order by c.vendor_code,a.upd_date desc,a.upd_time desc
 ) X
 -- gor è¡¨[0m
2023-07-17 14:50:35,696 [ERROR] [models.py:90] è·å–APIä½¿ç”¨æƒ…å†µå¤±è´¥:HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_date=2023-07-01&end_date=2023-07-31 (Caused by ProxyError('Cannot connect to proxy.', ConnectionResetError(54, 'Connection reset by peer')))
2023-07-17 14:50:35,798 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mâ˜¹ï¸å‘ç”Ÿäº†é”™è¯¯ï¼šè·å–å¯¹è¯æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·æŸ¥çœ‹åå°æ—¥å¿—[0m
2023-07-17 15:28:14,195 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34mselect X.* 
from (select 
      a.rowid row_noid,
      a.item,
      b.ACCT_GRP,
      b.ACCT_DEPT,
      b.item_name,
      b.vendor_code,
      substr(a.veff_date_from,1,4)||'-'||substr(a.veff_date_from,5,2)||'-'||substr(a.veff_date_from,7,2)||'~'||substr(a.veff_date_to,1,4)||'-'||substr(a.veff_date_to,5,2)||'-'||substr(a.veff_date_to,7,2) veff_date,
			substr(a.mm_start_date,1,4)||'-'||substr(a.mm_start_date,5,2)||'-'||substr(a.mm_start_date,7,2)||'~'||substr(a.mm_end_date,1,4)||'-'||substr(a.mm_end_date,5,2)||'-'||substr(a.mm_end_date,7,2) mm_date,
      a.upd_time,
      a.sales_days sales_days2,
			qua.TOTALQUA
  from mm_control a,sb005 b,sb003 c,taxtype d,ana17 e,
	(select a.item_no,sum(a.TOTALQUA) as TOTALQUA
from (
select hqm02.item_no,sb005v.item_name,hqm01.order_date,hqm01.order_no,dlv_date,deliv_date,
       decode(hqm01.deliv_yn,'Y','å·²æ”¶','N','å¾…æ”¶','D','åˆ å•','') deliv_desc,
       order_qty,deliv_qty/hqm02.unit_class deliv_qty,hqm02.unit_class,hqm01.vendor_code,sb003v.vendor_name,hqm01.req_date,hqm02.req_qty,
			 (order_qty * hqm02.unit_class) totalqua
  from hqm01,hqm02,sb005v,sb003v
where hqm01.order_date > to_char(sysdate-90,'yyyymmdd')
   and hqm01.order_no = hqm02.order_no
   and hqm02.item_no=sb005v.item(+)
   and hqm01.vendor_code=sb003v.vendor_code(+)
   -- and (hqm01.order_date='' or '' is null)
   and hqm01.order_date between a.veff_date_from and a.veff_date_to
order by hqm01.order_date,hqm02.item_no,hqm01.vendor_code desc
)a
GROUP BY a.ITEM_NO) qua
 where a.item = b.item
   and a.item = e.itemnumber(+)
   and b.vendor_code = c.vendor_code
   and b.taxid = d.taxid
	 and a.item = qua.ITEM_NO
   and (a.item like '%' or b.item_name like '%')
	-- and b.ACCT_DEPT = '%'
 order by c.vendor_code,a.upd_date desc,a.upd_time desc
 ) X
 -- gor è¡¨

[0m
2023-07-17 15:28:14,630 [ERROR] [models.py:90] è·å–APIä½¿ç”¨æƒ…å†µå¤±è´¥:HTTPSConnectionPool(host='api.openai.com', port=443): Max retries exceeded with url: /dashboard/billing/usage?start_date=2023-07-01&end_date=2023-07-31 (Caused by ProxyError('Cannot connect to proxy.', ConnectionResetError(54, 'Connection reset by peer')))
2023-07-17 15:28:14,744 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34mâ˜¹ï¸å‘ç”Ÿäº†é”™è¯¯ï¼šè·å–å¯¹è¯æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·æŸ¥çœ‹åå°æ—¥å¿—[0m
2023-07-17 17:12:20,621 [INFO] [base_model.py:378] ç”¨æˆ·çš„è¾“å…¥ä¸ºï¼š[34m	å‘é€åœ°å€é”™è¯¯ï¼š3350363131@qq.com
SMTP -> NOTICE: EOF caught while checking if connected[0m
2023-07-17 17:12:24,899 [INFO] [base_model.py:442] å›ç­”ä¸ºï¼š[34må¾ˆæŠ±æ­‰ï¼Œä½†æˆ‘åªèƒ½åœ¨æ–‡æœ¬æ¶ˆæ¯ä¸­æä¾›å¸®åŠ©ï¼Œæ— æ³•å‘é€ç”µå­é‚®ä»¶ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å‘æˆ‘æé—®ã€‚[0m
